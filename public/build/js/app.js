let paso=1;function iniciarApp(){mostrarSeccion(),tabs(),consultarAPIPromotores(),consultarAPIAfiliados(),buscador()}function mostrarSeccion(){const t=document.querySelector(".mostrar");t&&t.classList.remove("mostrar");const e="#paso-"+paso;document.querySelector(e).classList.add("mostrar");const a=document.querySelector(".actual");a&&a.classList.remove("actual");document.querySelector(`[data-paso="${paso}"]`).classList.add("actual")}function tabs(){document.querySelectorAll(".tabs button").forEach(t=>{t.addEventListener("click",(function(t){paso=parseInt(t.target.dataset.paso),mostrarSeccion()}))})}function buscador(){document.addEventListener("keyup",t=>{t.target.matches("#buscador")?document.querySelectorAll(".resultado").forEach(e=>{e.textContent.toLowerCase().includes(t.target.value.toLowerCase())?e.classList.remove("filter"):e.classList.add("filter")}):t.target.matches("#buscador-tabla")&&document.querySelectorAll(".resultado-tabla").forEach(e=>{e.textContent.toLowerCase().includes(t.target.value.toLowerCase())?e.classList.remove("filter"):e.classList.add("filter")})})}async function consultarAPIPromotores(){try{const t=location.origin+"/api/promotores",e=await fetch(t);mostrarPromotores(await e.json())}catch(t){console.log(t)}}async function consultarAPIAfiliados(){try{const t=location.origin+"/api/afiliados",e=await fetch(t);mostrarAfiliados(await e.json())}catch(t){console.log(t)}}function mostrarPromotores(t){t.forEach(t=>{const{id_promotor:e,nombre:a}=t,o=document.createElement("P");o.classList.add("nombre-promotor"),o.textContent=a;const n=document.createElement("A");n.classList.add("promotor"),n.classList.add("resultado"),n.href=`${location.origin}/afiliados?promotor=${a}`,n.dataset.idPromotor=e,n.appendChild(o),document.querySelector("#promotores").appendChild(n)})}function mostrarAfiliados(t){t.forEach(t=>{const{id_afiliado:e,estatus:a,nombres:o,ap:n,am:s,calle:c,numext:d,numint:i,localidad:l,telefono:r,fuente:m,promotor:u,seccional:p,coordz:f,seccion:C,ruta:L,padrino:h}=t,E=document.createElement("TD");E.classList.add("afiliado"),E.textContent=a||"//";const x=document.createElement("TD");x.classList.add("afiliado"),x.textContent=o||"//";const D=document.createElement("TD");D.classList.add("afiliado"),D.textContent=n||"//";const T=document.createElement("TD");T.classList.add("afiliado"),T.textContent=s||"//";const b=document.createElement("TD");b.classList.add("afiliado"),b.textContent=c||"//";const y=document.createElement("TD");y.classList.add("afiliado"),y.textContent=d||"//";const A=document.createElement("TD");A.classList.add("afiliado"),A.textContent=i||"//";const S=document.createElement("TD");S.classList.add("afiliado"),S.textContent=l||"//";const P=document.createElement("TD");P.classList.add("afiliado"),P.textContent=r||"//";const g=document.createElement("TD");g.classList.add("afiliado"),g.textContent=m||"//";const q=document.createElement("TD");q.classList.add("afiliado"),q.textContent=u||"//";const v=document.createElement("TD");v.classList.add("afiliado"),v.textContent=p||"//";const w=document.createElement("TD");w.classList.add("afiliado"),w.textContent=f||"//";const I=document.createElement("TD");I.classList.add("afiliado"),I.textContent=C||"//";const $=document.createElement("TD");$.classList.add("afiliado"),$.textContent=L||"//";const j=document.createElement("TD");j.classList.add("afiliado"),j.textContent=h||"//";const k=document.createElement("TR");k.classList.add("resultado-tabla"),k.dataset.idPromotor=e,k.appendChild(E),k.appendChild(x),k.appendChild(D),k.appendChild(T),k.appendChild(b),k.appendChild(y),k.appendChild(A),k.appendChild(S),k.appendChild(P),k.appendChild(g),k.appendChild(q),k.appendChild(v),k.appendChild(w),k.appendChild(I),k.appendChild($),k.appendChild(j),document.querySelector("#afiliados").appendChild(k)})}document.addEventListener("DOMContentLoaded",(function(){iniciarApp()}));